<div class="container">
  <div class="card mt-2">
    <div class="card-header">Formulario de Productos</div>
    <div class="card-body">
      <div class="align-middle">
        <form>
          <div class="row mt-1">
            <div class="col-3">
              <label class="form-label">Nombre</label>
              <input
                class="form-control"
                type="text"
                [(ngModel)]="producto.nombre"
                name="nombre"
              />
            </div>
            <div class="col-2">
              <label class="form-label">Estado</label>
              <input
                class="form-control"
                type="text"
                [(ngModel)]="producto.estado"
                name="estado"
              />
            </div>

            <div class="col-7">
              <label class="form-label">Imagen</label>
              <div class="input-group">
                <input
                  required
                  type="file"
                  class="form-control"
                  name="foto"
                  (change)="onFileSelected($event)"
                />
              </div>
            </div>
          </div>
          <div class="row mt-1">
            <div class="col-7">
              <div class="row">
                <div class="col-10">
                  <label class="form-label">Marca</label>
                  <select
                    [compareWith]="comparar"
                    class="form-select"
                    [(ngModel)]="producto.marca"
                    name="marca"
                  >
                    <option [ngValue]="undefined">--Selecionar marca--</option>
                    @for (m of marcas; track m) {
                      <option [ngValue]="m">
                        {{ m.nombre }}
                      </option>
                    }
                  </select>
                </div>
              </div>

              <div class="row mt-1">
                <div class="col-10">
                  <label class="form-label">Categoría</label>
                  <select
                    required
                    [compareWith]="comparar"
                    class="form-select"
                    [(ngModel)]="producto.categoria"
                    name="categoria"
                  >
                    <option [ngValue]="undefined">
                      --Selecionar categoría--
                    </option>
                    @for (c of categorias; track c) {
                      <option [ngValue]="c">
                        {{ c.detalle }}
                      </option>
                    }
                  </select>
                </div>
              </div>

              <div class="row mt-1">
                <div class="col-10">
                  <label class="form-label">Unidad de Medida</label>
                  <select
                    [compareWith]="comparar"
                    class="form-select"
                    [(ngModel)]="producto.medida"
                    name="medida"
                    id=""
                  >
                    <option [ngValue]="undefined">--Selecionar unidad--</option>
                    @for (u of medidas; track u) {
                      <option [ngValue]="u">
                        {{ u.descripcion }}
                      </option>
                    }
                  </select>
                </div>
              </div>
            </div>

            @if (producto?.ruta) {
              <div class="col-5 mt-4">
                <div class="row text-center">
                  <div class="col">
                    <img
                      class="rounded-menos"
                      src="http://localhost:8080/tienda/images/img/{{
                        producto.ruta
                      }}"
                      style="max-width: 200px; max-height: 200px"
                    />
                    <div class="row">
                      <label class="form-label">{{ producto.ruta }}</label>
                    </div>
                  </div>
                </div>
              </div>
            }
          </div>
          <div class="row mt-1">
            <div class="col-12">
              <label class="form-label">Descripción</label>
              <textarea
                class="form-control"
                type="text-area"
                [(ngModel)]="producto.descripcion"
                name="descripcion"
              >
              </textarea>
            </div>
          </div>
          <div class="row mt-3"></div>
          @if (!producto.id) {
            <button type="submit" class="btn btn-success" (click)="create2()">
              Crear
            </button>
          } @else {
            <button
              type="submit"
              class="btn btn-success me-2"
              (click)="update2()"
            >
              Actualizar
            </button>
          }
          <button
            type="button"
            class="btn btn-danger ms-1"
            [routerLink]="['/productos']"
          >
            Cancelar
          </button>
        </form>
      </div>
    </div>
  </div>
</div>
